name: crud-api

on:
    push: 
        paths:
            - 'apis/crud-api/**'

jobs:
    build:
        name: Build CRUD API ğŸ—ï¸
        runs-on: ubuntu-latest

        steps:  
          - name: Checkout ğŸ›ï¸
            uses: actions/checkout@v4

          - name: Setup Node.js âš™ï¸ - Install dependencies 
            uses: ./.github/workflows/actions/setup_node--install_dep
        
          - name: Build CRUD API ğŸ—ï¸
            run: pnpm build --filter=./apis/crud-api
    test:
        name: Testes CRUD API ğŸ§ª
        runs-on: ubuntu-latest
        needs: [build]

        steps:
          - name: Checkout ğŸ›ï¸
            uses: actions/checkout@v4

          - name: Setup Node.js âš™ï¸ - Install dependencies 
            uses: ./.github/workflows/actions/setup_node--install_dep
        
          - name: Teste ğŸ§ª
            run: pnpm test --filter=./apis/crud-api

