name: crud-api

on:
    push: 
        paths:
            - 'apis/crud-api/**'

jobs:
    build:
        name: Build CRUD API 🏗️
        runs-on: ubuntu-latest

        steps:  
          - name: Checkout 🛎️
            uses: actions/checkout@v4

          - name: Setup Node.js ⚙️ - Install dependencies 
            uses: ./.github/workflows/actions/setup_node--install_dep
        
          - name: Build CRUD API 🏗️
            run: pnpm build --filter=./apis/crud-api
    test:
        name: Testes CRUD API 🧪
        runs-on: ubuntu-latest
        needs: [build]

        steps:
          - name: Checkout 🛎️
            uses: actions/checkout@v4

          - name: Setup Node.js ⚙️ - Install dependencies 
            uses: ./.github/workflows/actions/setup_node--install_dep
        
          - name: Teste 🧪
            run: pnpm test --filter=./apis/crud-api

